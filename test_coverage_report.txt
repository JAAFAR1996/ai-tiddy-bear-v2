================================================================================
TEST COVERAGE ANALYSIS - AI TEDDY BACKEND
================================================================================

Total source files: 420
Files missing tests: 361
Estimated coverage: 14.0%

================================================================================
FILES MISSING TEST COVERAGE (grouped by directory)
================================================================================

ğŸ“ domain/services/ (HIGH PRIORITY)
   âŒ age_filter.py
   âŒ coppa_age_validation.py
   âŒ data_retention_service.py
   âŒ parental_consent_enforcer.py
   âŒ safety_validator.py

ğŸ“ domain/entities/ (HIGH PRIORITY)
   âŒ audio_session.py
   âŒ encrypted_child.py

ğŸ“ domain/entities/parent_profile/ (HIGH PRIORITY)
   âŒ entities.py

ğŸ“ domain/entities/voice_games/ (HIGH PRIORITY)
   âŒ voice_games_engine.py

ğŸ“ application/services/ (HIGH PRIORITY)
   âŒ accessibility_service.py
   âŒ advanced_personalization_service.py
   âŒ advanced_progress_analyzer.py
   âŒ async_session_manager.py
   âŒ audio_processing_service.py
   âŒ audio_service.py
   âŒ audit_service.py
   âŒ cleanup_service.py
   âŒ consent_service.py
   âŒ content_filter_service.py
   âŒ data_export_service.py
   âŒ data_retention_service.py
   âŒ dynamic_content_service.py
   âŒ dynamic_story_service.py
   âŒ esp32_device_service.py
   âŒ feature_service.py
   âŒ federated_learning_service.py
   âŒ incident_service.py
   âŒ interaction_service.py
   âŒ notification_service.py
   âŒ parent_child_verification_service.py
   âŒ response_generator.py
   âŒ transcription_models.py
   âŒ transcription_service.py
   âŒ voice_service.py

ğŸ“ application/services/ai/ (HIGH PRIORITY)
   âŒ main_service.py
   âŒ models.py
   âŒ utils.py

ğŸ“ application/services/ai/modules/ (HIGH PRIORITY)
   âŒ response_generator.py
   âŒ transcription_service.py

ğŸ“ application/services/consent/ (HIGH PRIORITY)
   âŒ consent_models.py
   âŒ consent_service.py
   âŒ verification_service.py

ğŸ“ application/services/data_export/ (HIGH PRIORITY)
   âŒ formatters.py
   âŒ types.py

ğŸ“ application/services/session/ (HIGH PRIORITY)
   âŒ session_models.py
   âŒ session_storage.py

ğŸ“ application/services/verification/ (HIGH PRIORITY)
   âŒ relationship_manager.py
   âŒ verification_models.py
   âŒ verification_service.py

ğŸ“ infrastructure/security/ (HIGH PRIORITY)
   âŒ access_control_service.py
   âŒ api_security_manager.py
   âŒ audit_decorators.py
   âŒ audit_logger.py
   âŒ child_data_encryption.py
   âŒ child_data_security_manager.py
   âŒ comprehensive_audit_integration.py
   âŒ comprehensive_input_validation_middleware.py
   âŒ comprehensive_rate_limiter.py
   âŒ coppa_compliance_service.py
   âŒ coppa_validator.py
   âŒ cors_service.py
   âŒ database_input_validator.py
   âŒ email_validator.py
   âŒ enhanced_security.py
   âŒ environment_validator.py
   âŒ error_handler.py
   âŒ fallback_rate_limiter.py
   âŒ file_security_manager.py
   âŒ https_middleware.py
   âŒ jwt_auth.py
   âŒ key_rotation.py
   âŒ key_rotation_service.py
   âŒ log_sanitization_config.py
   âŒ log_sanitizer.py
   âŒ logging_security_monitor.py
   âŒ main_security_service.py
   âŒ models.py
   âŒ password_hasher.py
   âŒ password_validator.py
   âŒ path_validator.py
   âŒ plugin_architecture.py
   âŒ production_encryption_service.py
   âŒ rate_limiter.py
   âŒ rate_limiter_service.py
   âŒ real_auth_service.py
   âŒ registration_models.py
   âŒ request_security_detector.py
   âŒ request_signing_service.py
   âŒ robust_encryption_service.py
   âŒ safety_monitor_service.py
   âŒ secret_manager.py
   âŒ secure_error_handler.py
   âŒ secure_logger.py
   âŒ secure_logging.py
   âŒ secure_user_registration.py
   âŒ security_headers_middleware.py
   âŒ security_headers_service.py
   âŒ security_manager.py
   âŒ security_middleware.py
   âŒ sql_injection_protection.py
   âŒ token_service.py
   âŒ vault_client.py

ğŸ“ infrastructure/security/coppa/ (HIGH PRIORITY)
   âŒ consent_manager.py
   âŒ data_models.py
   âŒ data_retention.py

ğŸ“ infrastructure/security/hardening/ (HIGH PRIORITY)
   âŒ csrf_protection.py
   âŒ rate_limiter.py
   âŒ secure_settings.py
   âŒ security_headers.py
   âŒ security_tests.py

ğŸ“ infrastructure/security/hardening/security_tests/ (HIGH PRIORITY)
   âŒ authentication_tests.py
   âŒ base_tester.py
   âŒ compliance_tests.py
   âŒ encryption_tests.py
   âŒ injection_tests.py
   âŒ security_tester.py

ğŸ“ infrastructure/security/hardening/validation/ (HIGH PRIORITY)
   âŒ middleware.py
   âŒ sanitizer.py
   âŒ validation_config.py
   âŒ validation_rules.py

ğŸ“ infrastructure/security/input_validation/ (HIGH PRIORITY)
   âŒ core.py
   âŒ detectors.py
   âŒ middleware.py
   âŒ patterns.py

ğŸ“ infrastructure/security/key_management/ (HIGH PRIORITY)
   âŒ key_generator.py
   âŒ key_lifecycle_manager.py
   âŒ key_rotation_orchestrator.py
   âŒ rotation_executor.py
   âŒ rotation_policy_manager.py
   âŒ rotation_statistics.py

ğŸ“ infrastructure/security/rate_limiter/ (HIGH PRIORITY)
   âŒ convenience.py
   âŒ core.py
   âŒ storage.py
   âŒ strategies.py

ğŸ“ infrastructure/security/secrets_manager/ (HIGH PRIORITY)
   âŒ secrets_manager.py

ğŸ“ infrastructure/security/tests/ (HIGH PRIORITY)
   âŒ test_path_traversal_fixes.py

ğŸ“ infrastructure/security/validation/ (HIGH PRIORITY)
   âŒ input_sanitizer.py
   âŒ query_validator.py

ğŸ“ infrastructure/persistence/ (HIGH PRIORITY)
   âŒ conversation_repository.py
   âŒ conversation_sqlite_repository.py
   âŒ database_service_orchestrator.py
   âŒ event_store.py
   âŒ kafka_event_store.py
   âŒ model_registry.py
   âŒ models.py
   âŒ postgres_event_store.py
   âŒ production_database_config.py
   âŒ real_database_service.py
   âŒ repositories.py

ğŸ“ infrastructure/persistence/database/ (HIGH PRIORITY)
   âŒ initializer.py
   âŒ validators.py

ğŸ“ infrastructure/persistence/models/ (HIGH PRIORITY)
   âŒ child_model.py
   âŒ child_models.py
   âŒ consent_models.py
   âŒ conversation_model.py
   âŒ conversation_models.py
   âŒ parent_models.py
   âŒ user_model.py

ğŸ“ infrastructure/persistence/repositories/ (HIGH PRIORITY)
   âŒ conversation_repository.py
   âŒ safety_repository.py
   âŒ usage_repository.py
   âŒ user_repository.py

ğŸ“ application/dto/
   âŒ child_data.py
   âŒ esp32_request.py
   âŒ story_request.py
   âŒ story_response.py

ğŸ“ application/dto/esp32/
   âŒ esp32_data.py

ğŸ“ application/event_handlers/
   âŒ child_profile_event_handlers.py

ğŸ“ application/interfaces/
   âŒ ai_provider.py
   âŒ infrastructure_services.py
   âŒ read_model_interfaces.py
   âŒ safety_monitor.py
   âŒ speech_processor.py
   âŒ text_to_speech_service.py
   âŒ tts_provider.py

ğŸ“ application/interfaces/security/
   âŒ encryption_interfaces.py

ğŸ“ common/
   âŒ constants.py

ğŸ“ domain/
   âŒ constants.py
   âŒ contracts.py
   âŒ schemas.py

ğŸ“ domain/esp32/
   âŒ models.py

ğŸ“ domain/events/
   âŒ child_profile_updated.py
   âŒ child_registered.py
   âŒ conversation_started.py
   âŒ conversation_updated.py

ğŸ“ domain/exceptions/
   âŒ base_exceptions.py

ğŸ“ domain/interfaces/
   âŒ ai_service_interface.py
   âŒ config_interface.py
   âŒ encryption_interface.py
   âŒ event_bus_interface.py
   âŒ external_service_interfaces.py
   âŒ logging_interface.py
   âŒ repository_interfaces.py
   âŒ security_interfaces.py

ğŸ“ domain/models/
   âŒ consent_models.py
   âŒ data_retention_models.py

ğŸ“ domain/repositories/
   âŒ conversation_repository.py
   âŒ event_store.py

ğŸ“ domain/safety/
   âŒ models.py

ğŸ“ domain/safety/bias_detector/
   âŒ bias_detector.py

ğŸ“ domain/safety/bias_models/
   âŒ bias_models.py

ğŸ“ domain/value_objects/
   âŒ age_group.py
   âŒ child_age.py
   âŒ child_preferences.py
   âŒ encrypted_field.py
   âŒ language.py
   âŒ safety_level.py

ğŸ“ infrastructure/
   âŒ dependencies.py
   âŒ exceptions.py
   âŒ lifespan.py
   âŒ logging_config.py
   âŒ middleware.py

ğŸ“ infrastructure/adapters/
   âŒ encryption_adapter.py

ğŸ“ infrastructure/ai/
   âŒ models.py
   âŒ production_ai_service.py
   âŒ prompt_builder.py
   âŒ real_ai_service.py
   âŒ safety_analyzer.py

ğŸ“ infrastructure/ai/chatgpt/
   âŒ client.py
   âŒ fallback_responses.py
   âŒ response_enhancer.py
   âŒ safety_filter.py

ğŸ“ infrastructure/cache/
   âŒ redis_cache.py

ğŸ“ infrastructure/caching/
   âŒ cache_config.py
   âŒ redis_cache_manager.py

ğŸ“ infrastructure/caching/strategies/
   âŒ invalidation_strategy.py

ğŸ“ infrastructure/chaos/actions/
   âŒ ai_model_recovery_testing.py
   âŒ bias_detection_testing.py
   âŒ hallucination_testing.py
   âŒ load_testing.py
   âŒ response_consistency_testing.py

ğŸ“ infrastructure/chaos/infrastructure/
   âŒ chaos_injector.py
   âŒ chaos_monitor.py
   âŒ chaos_orchestrator.py
   âŒ chaos_reporter.py

ğŸ“ infrastructure/chaos/monitoring/
   âŒ chaos_metrics.py

ğŸ“ infrastructure/chaos/monitoring/chaos_metrics/
   âŒ data_models.py
   âŒ metrics_collector.py

ğŸ“ infrastructure/config/
   âŒ ai_settings.py
   âŒ base_settings.py
   âŒ env_security.py
   âŒ infrastructure_settings.py
   âŒ models.py
   âŒ production_check.py
   âŒ production_settings.py
   âŒ secure_settings.py
   âŒ security_settings.py
   âŒ settings.py
   âŒ startup_validator.py
   âŒ validators.py

ğŸ“ infrastructure/container/
   âŒ app_container.py

ğŸ“ infrastructure/di/
   âŒ fastapi_dependencies.py

ğŸ“ infrastructure/di/di_components/
   âŒ service_factory.py
   âŒ wiring_config.py

ğŸ“ infrastructure/error_handling/
   âŒ decorators.py
   âŒ error_handlers.py
   âŒ exceptions.py
   âŒ handlers.py
   âŒ messages.py

ğŸ“ infrastructure/exception_handling/
   âŒ circuit_breaker.py
   âŒ enterprise_exception_handler.py
   âŒ global_exception_handler.py

ğŸ“ infrastructure/external_apis/
   âŒ azure_speech_client.py
   âŒ chatgpt_client.py
   âŒ chatgpt_service.py
   âŒ elevenlabs_client.py
   âŒ openai_client.py
   âŒ whisper_client.py

ğŸ“ infrastructure/external_services/
   âŒ speech_analysis_base.py
   âŒ speech_disorder_analyzer.py
   âŒ speech_disorder_detector.py

ğŸ“ infrastructure/health/
   âŒ checks.py
   âŒ health_manager.py
   âŒ models.py

ğŸ“ infrastructure/health/checks/
   âŒ database_check.py
   âŒ redis_check.py
   âŒ system_check.py

ğŸ“ infrastructure/logging/
   âŒ audit_logger.py
   âŒ standards.py

ğŸ“ infrastructure/messaging/
   âŒ audio_streamer.py
   âŒ esp32_handler.py
   âŒ event_driven_architecture.py
   âŒ kafka_event_bus.py

ğŸ“ infrastructure/middleware/
   âŒ rate_limit_middleware.py
   âŒ request_signing.py
   âŒ secure_cors.py

ğŸ“ infrastructure/monitoring/
   âŒ comprehensive_monitoring.py
   âŒ comprehensive_monitoring_refactored.py

ğŸ“ infrastructure/monitoring/components/
   âŒ child_safety_monitor.py
   âŒ monitoring_service.py
   âŒ types.py

ğŸ“ infrastructure/pagination/
   âŒ pagination_service.py

ğŸ“ infrastructure/performance/
   âŒ batch_loader.py
   âŒ caching_decorators.py
   âŒ memoization.py

ğŸ“ infrastructure/read_models/
   âŒ child_profile_read_model.py

ğŸ“ infrastructure/repositories/
   âŒ event_sourced_child_repository.py

ğŸ“ infrastructure/resilience/
   âŒ circuit_breaker.py
   âŒ retry_decorator.py

ğŸ“ infrastructure/services/
   âŒ data_retention_service.py

ğŸ“ infrastructure/session_manager/
   âŒ session_models.py

ğŸ“ infrastructure/state/
   âŒ application_state_manager.py

ğŸ“ infrastructure/validation/
   âŒ child_safety_validator.py
   âŒ comprehensive_input_validator.py
   âŒ comprehensive_validator.py
   âŒ emergency_contact_validator.py
   âŒ general_input_validator.py
   âŒ types.py
   âŒ validation_types.py

ğŸ“ presentation/
   âŒ routing.py

ğŸ“ presentation/api/
   âŒ error_handlers.py
   âŒ health_endpoints.py
   âŒ main_router.py
   âŒ openapi_config.py
   âŒ openapi_docs.py
   âŒ validators.py

ğŸ“ presentation/api/emergency_response/
   âŒ models.py
   âŒ services.py

ğŸ“ presentation/api/endpoints/
   âŒ chatgpt.py
   âŒ children_legacy.py
   âŒ conversations_paginated.py
   âŒ coppa_notices.py
   âŒ device.py
   âŒ example_simplified.py
   âŒ monitoring_dashboard.py

ğŸ“ presentation/api/endpoints/auth/
   âŒ routes_di.py

ğŸ“ presentation/api/endpoints/children/
   âŒ create_child.py
   âŒ get_children.py
   âŒ models.py
   âŒ route_handlers.py
   âŒ routes.py
   âŒ routes_di.py
   âŒ routes_refactored.py

ğŸ“ presentation/api/middleware/
   âŒ child_safe_rate_limiter.py
   âŒ comprehensive_security_headers.py
   âŒ exception_handler.py
   âŒ rate_limit_middleware.py
   âŒ request_logging.py
   âŒ security_headers.py
   âŒ security_headers_refactored.py
   âŒ security_headers_refactored_clean.py

ğŸ“ presentation/api/middleware/security/
   âŒ child_safety_middleware.py
   âŒ headers_config.py
   âŒ rate_limiting_middleware.py
   âŒ security_headers_middleware.py

ğŸ“ presentation/api/middleware/security_headers/
   âŒ csp_policies.py
   âŒ header_builder.py
   âŒ header_config.py
   âŒ middleware.py

ğŸ“ presentation/api/models/
   âŒ standard_responses.py
   âŒ validation_models.py

ğŸ“ presentation/middleware/
   âŒ cors_middleware.py
   âŒ error_handler.py
   âŒ logging_middleware.py

ğŸ“ presentation/schemas/
   âŒ esp32_schemas.py
   âŒ parent_schemas.py

ğŸ“ utils/
   âŒ comment_formatter.py
   âŒ file_validators.py
   âŒ find_long_functions.py
   âŒ import_organizer.py
   âŒ type_annotation_fixer.py

================================================================================
TOP 20 CRITICAL FILES NEEDING TESTS
================================================================================
 1. utils/file_validators.py
 2. application/event_handlers/child_profile_event_handlers.py
 3. application/interfaces/infrastructure_services.py
 4. application/interfaces/speech_processor.py
 5. application/interfaces/text_to_speech_service.py
 6. application/services/accessibility_service.py
 7. application/services/advanced_personalization_service.py
 8. application/services/async_session_manager.py
 9. application/services/audio_processing_service.py
10. application/services/audio_service.py
11. application/services/audit_service.py
12. application/services/cleanup_service.py
13. application/services/consent_service.py
14. application/services/content_filter_service.py
15. application/services/data_export_service.py
16. application/services/data_retention_service.py
17. application/services/dynamic_content_service.py
18. application/services/dynamic_story_service.py
19. application/services/esp32_device_service.py
20. application/services/feature_service.py