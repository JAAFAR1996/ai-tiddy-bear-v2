.
├── 234.py
├── 66.py
├── CLAUDE.md
├── Dockerfile
├── Dockerfile.production
├── FINAL_REFACTORING_REPORT.md
├── MIGRATION_GUIDE.md
├── README.md
├── REFACTORING_REPORT.md
├── SECURITY_REFACTORING_REPORT.md
├── SERVICES_REFACTORING_REPORT.md
├── VALIDATORS_REFACTORING_REPORT.md
├── alembic.ini
├── audit_report_ai_teddy_20250720_113809.md
├── audit_summary_20250720_113809.json
├── comprehensive_test_report.json
├── config
│   ├── api_keys.json.example
│   ├── default_schema.json
│   ├── default_schema_new.json
│   ├── environments
│   │   ├── development.json
│   │   ├── production_config.json
│   │   └── staging_config.json
│   ├── mypy.ini
│   ├── schemas
│   │   ├── application.json
│   │   ├── audio_processing.json
│   │   ├── common_definitions.json
│   │   ├── content_moderation.json
│   │   ├── database.json
│   │   ├── development.json
│   │   ├── feature_flags.json
│   │   ├── integrations.json
│   │   ├── interaction_limits.json
│   │   ├── llm_settings.json
│   │   ├── logging_config.json
│   │   ├── monitoring.json
│   │   ├── parental_controls.json
│   │   ├── performance_settings.json
│   │   ├── privacy_compliance.json
│   │   ├── security.json
│   │   ├── server.json
│   │   ├── streaming_settings.json
│   │   └── voice_settings.json
│   ├── setup.cfg
│   └── tests
│       └── pytest.ini
├── docker-compose.prod.yml
├── docker-compose.production.yml
├── docker-entrypoint.sh
├── github_auto_backup.bat
├── monitoring
│   ├── alerts
│   │   └── child-safety.yml
│   └── prometheus.yml
├── openapi.yaml
├── project_tree.txt
├── reports
│   ├── class_usage_report.md
│   ├── classes_progress_report.md
│   ├── coppa_service_fix_report.md
│   ├── detailed_usage_report.md
│   ├── duplicate_classes_report.md
│   └── duplicate_functions_report.md
├── requirements-dev.txt
├── requirements.txt
├── split_report.py
├── sql
│   └── init-production.sql
├── src
│   ├── __init__.py
│   ├── application
│   │   ├── __init__.py
│   │   ├── dto
│   │   │   ├── __init__.py
│   │   │   ├── ai_response.py
│   │   │   ├── child_data.py
│   │   │   ├── esp32
│   │   │   ├── esp32_request.py
│   │   │   └── story_response.py
│   │   ├── event_handlers
│   │   │   ├── __init__.py
│   │   │   └── child_profile_event_handlers.py
│   │   ├── interfaces
│   │   │   ├── __init__.py
│   │   │   ├── ai_provider.py
│   │   │   ├── infrastructure_services.py
│   │   │   ├── read_model_interfaces.py
│   │   │   ├── safety_monitor.py
│   │   │   ├── security
│   │   │   ├── speech_processor.py
│   │   │   └── text_to_speech_service.py
│   │   ├── services
│   │   │   ├── __init__.py
│   │   │   ├── ai
│   │   │   ├── child_safety
│   │   │   ├── content
│   │   │   ├── coppa
│   │   │   ├── core
│   │   │   ├── data
│   │   │   ├── device
│   │   │   └── user
│   │   ├── use_cases
│   │   │   ├── __init__.py
│   │   │   ├── generate_ai_response.py
│   │   │   ├── generate_dynamic_story.py
│   │   │   ├── manage_child_profile.py
│   │   │   └── process_esp32_audio.py
│   │   └── validators
│   ├── common
│   │   ├── __init__.py
│   │   ├── constants.py
│   │   ├── exceptions
│   │   │   ├── __init__.py
│   │   │   ├── application_exceptions.py
│   │   │   ├── base_exceptions.py
│   │   │   ├── domain_exceptions.py
│   │   │   └── infrastructure_exceptions.py
│   │   ├── utils
│   │   │   └── __init__.py
│   │   └── validators
│   │       ├── __init__.py
│   │       └── base.py
│   ├── domain
│   │   ├── __init__.py
│   │   ├── analytics.py
│   │   ├── constants.py
│   │   ├── contracts.py
│   │   ├── entities
│   │   │   ├── New Text Document.txt
│   │   │   ├── __init__.py
│   │   │   ├── audio_session.py
│   │   │   ├── child.py
│   │   │   ├── child_profile.py
│   │   │   ├── conversation.py
│   │   │   ├── emotion.py
│   │   │   ├── encrypted_child.py
│   │   │   ├── parent_profile
│   │   │   ├── user.py
│   │   │   └── voice_games
│   │   ├── esp32
│   │   │   ├── __init__.py
│   │   │   └── models.py
│   │   ├── events
│   │   │   ├── __init__.py
│   │   │   ├── child_profile_updated.py
│   │   │   ├── child_registered.py
│   │   │   ├── conversation_started.py
│   │   │   ├── conversation_updated.py
│   │   │   └── domain_events.py
│   │   ├── exceptions
│   │   │   └── __init__.py
│   │   ├── interfaces
│   │   │   ├── __init__.py
│   │   │   ├── accessibility_profile_repository.py
│   │   │   ├── ai_service_interface.py
│   │   │   ├── child_profile_repository.py
│   │   │   ├── config_interface.py
│   │   │   ├── conversation_repository.py
│   │   │   ├── device_authenticator.py
│   │   │   ├── encryption_interface.py
│   │   │   ├── event_bus_interface.py
│   │   │   ├── external_service_interfaces.py
│   │   │   ├── logging_interface.py
│   │   │   ├── notification_clients.py
│   │   │   ├── notification_repository.py
│   │   │   ├── personality_profile_repository.py
│   │   │   ├── repository_interfaces.py
│   │   │   ├── sanitization_service.py
│   │   │   ├── security_interfaces.py
│   │   │   └── session_repository.py
│   │   ├── models
│   │   │   ├── consent_models.py
│   │   │   └── data_retention_models.py
│   │   ├── repositories
│   │   │   ├── __init__.py
│   │   │   └── event_store.py
│   │   ├── safety
│   │   │   ├── __init__.py
│   │   │   ├── bias_detector
│   │   │   ├── bias_models
│   │   │   └── models.py
│   │   ├── schemas.py
│   │   ├── services
│   │   │   ├── __init__.py
│   │   │   ├── age_filter.py
│   │   │   ├── coppa_age_validation.py
│   │   │   ├── emotion_analyzer.py
│   │   │   └── parental_consent_enforcer.py
│   │   ├── validators
│   │   │   ├── __init__.py
│   │   │   └── safety_validator.py
│   │   └── value_objects
│   │       ├── __init__.py
│   │       ├── accessibility.py
│   │       ├── child_age.py
│   │       ├── child_name.py
│   │       ├── child_preferences.py
│   │       ├── encrypted_field.py
│   │       ├── language.py
│   │       ├── notification.py
│   │       ├── personality.py
│   │       └── safety_level.py
│   ├── infrastructure
│   │   ├── __init__.py
│   │   ├── adapters
│   │   │   └── encryption_adapter.py
│   │   ├── ai
│   │   │   ├── chatgpt
│   │   │   ├── models.py
│   │   │   ├── prompt_builder.py
│   │   │   ├── real_ai_service.py
│   │   │   └── safety_analyzer.py
│   │   ├── app_initializer.py
│   │   ├── caching
│   │   │   ├── __init__.py
│   │   │   ├── cache_config.py
│   │   │   ├── redis_cache.py
│   │   │   └── strategies
│   │   ├── chaos
│   │   │   ├── __init__.py
│   │   │   ├── actions
│   │   │   ├── infrastructure
│   │   │   └── monitoring
│   │   ├── config
│   │   │   ├── __init__.py
│   │   │   ├── core
│   │   │   ├── integrations
│   │   │   ├── monitoring
│   │   │   ├── security
│   │   │   ├── services
│   │   │   └── settings.py
│   │   ├── container
│   │   │   └── __init__.py
│   │   ├── database
│   │   │   └── __init__.py
│   │   ├── dependencies.py
│   │   ├── di
│   │   │   ├── __init__.py
│   │   │   ├── application_container.py
│   │   │   ├── container.py
│   │   │   ├── di_components
│   │   │   └── fastapi_dependencies.py
│   │   ├── error_handling
│   │   │   ├── __init__.py
│   │   │   ├── decorators.py
│   │   │   ├── error_types.py
│   │   │   └── messages.py
│   │   ├── exception_handling
│   │   │   ├── __init__.py
│   │   │   ├── enterprise_exception_handler.py
│   │   │   └── global_exception_handler
│   │   ├── external_apis
│   │   │   ├── __init__.py
│   │   │   ├── azure_speech_client.py
│   │   │   ├── chatgpt_client.py
│   │   │   ├── chatgpt_service.py
│   │   │   ├── elevenlabs_client.py
│   │   │   ├── openai_client.py
│   │   │   └── whisper_client.py
│   │   ├── external_services
│   │   │   ├── __init__.py
│   │   │   ├── dummy_notification_clients.py
│   │   │   ├── dummy_sanitization_service.py
│   │   │   ├── speech_analysis_base.py
│   │   │   ├── speech_disorder_analyzer.py
│   │   │   └── speech_disorder_detector.py
│   │   ├── health
│   │   │   ├── __init__.py
│   │   │   ├── checks
│   │   │   ├── checks.py
│   │   │   ├── health_manager.py
│   │   │   └── models.py
│   │   ├── lifespan.py
│   │   ├── logging
│   │   │   ├── __init__.py
│   │   │   └── standards.py
│   │   ├── logging_config.py
│   │   ├── messaging
│   │   │   ├── __init__.py
│   │   │   ├── audio_streamer.py
│   │   │   ├── esp32_handler.py
│   │   │   ├── event_driven_architecture.py
│   │   │   └── kafka_event_bus.py
│   │   ├── middleware
│   │   │   ├── __init__.py
│   │   │   └── security
│   │   ├── monitoring
│   │   │   ├── __init__.py
│   │   │   ├── components
│   │   │   ├── comprehensive_monitoring_refactored.py
│   │   │   └── performance_monitor.py
│   │   ├── pagination
│   │   │   ├── __init__.py
│   │   │   └── pagination_service.py
│   │   ├── performance
│   │   │   ├── batch_loader.py
│   │   │   ├── caching_decorators.py
│   │   │   └── memoization.py
│   │   ├── persistence
│   │   │   ├── __init__.py
│   │   │   ├── child_repository.py
│   │   │   ├── child_sqlite_repository
│   │   │   ├── conversation_repository.py
│   │   │   ├── conversation_sqlite_repository.py
│   │   │   ├── database
│   │   │   ├── database_health_check.py
│   │   │   ├── database_manager.py
│   │   │   ├── database_service_orchestrator.py
│   │   │   ├── kafka_event_store.py
│   │   │   ├── model_registry.py
│   │   │   ├── models
│   │   │   ├── models.py
│   │   │   ├── postgres_event_store.py
│   │   │   ├── production_database_config.py
│   │   │   ├── real_database_service.py
│   │   │   ├── real_database_service.py.backup
│   │   │   ├── redis_accessibility_profile_repository.py
│   │   │   ├── redis_notification_repository.py
│   │   │   ├── redis_personality_profile_repository.py
│   │   │   ├── redis_session_repository.py
│   │   │   ├── repositories
│   │   │   └── repositories.py
│   │   ├── read_models
│   │   │   ├── __init__.py
│   │   │   └── child_profile_read_model.py
│   │   ├── repositories
│   │   │   ├── __init__.py
│   │   │   └── event_sourced_child_repository.py
│   │   ├── resilience
│   │   │   ├── __init__.py
│   │   │   ├── circuit_breaker.py
│   │   │   └── retry_decorator.py
│   │   ├── security
│   │   │   ├── __init__.py
│   │   │   ├── audit
│   │   │   ├── auth
│   │   │   ├── child_safety
│   │   │   ├── core
│   │   │   ├── encryption
│   │   │   ├── key_management
│   │   │   ├── rate_limiter
│   │   │   ├── tests
│   │   │   ├── validation
│   │   │   └── web
│   │   ├── services
│   │   │   └── data_retention_service.py
│   │   ├── session_manager
│   │   │   ├── __init__.py
│   │   │   └── session_models.py
│   │   ├── state
│   │   │   ├── __init__.py
│   │   │   └── application_state_manager.py
│   │   ├── validation
│   │   └── validators
│   │       ├── __init__.py
│   │       ├── config
│   │       ├── data
│   │       └── security
│   ├── main.py
│   ├── presentation
│   │   ├── __init__.py
│   │   ├── api
│   │   │   ├── __init__.py
│   │   │   ├── decorators
│   │   │   ├── dependencies
│   │   │   ├── emergency_response
│   │   │   ├── endpoints
│   │   │   ├── esp32_endpoints.py
│   │   │   ├── health_endpoints.py
│   │   │   ├── main_router.py
│   │   │   ├── middleware
│   │   │   ├── models
│   │   │   ├── openapi.yaml
│   │   │   ├── openapi_config.py
│   │   │   ├── openapi_docs.py.backup
│   │   │   ├── parental_dashboard.py
│   │   │   └── websocket
│   │   ├── dependencies
│   │   │   └── __init__.py
│   │   ├── routing.py
│   │   ├── schemas
│   │   │   ├── __init__.py
│   │   │   ├── esp32_schemas.py
│   │   │   ├── parent_schemas.py
│   │   │   └── voice_schemas.py
│   │   ├── validators
│   │   │   └── api_validators.py
│   │   └── websocket
│   │       └── __init__.py
│   └── static
│       └── audio_test.html
├── temp_merge
│   ├── __init__.py
│   └── endpoints
│       ├── __init__.py
│       ├── voice_models.py
│       └── voice_routes.py
├── test_imports.py
├── tests
│   ├── TESTING_GUIDE.md
│   ├── ai_test_generator.py
│   ├── architecture
│   │   └── test_phase2_architecture_modernization.py
│   ├── backend_components
│   │   ├── __init__.py
│   │   ├── conftest.py
│   │   ├── test_ai_service.py
│   │   ├── test_conversation_service.py
│   │   ├── test_emotion_service.py
│   │   ├── test_encryption_service.py
│   │   ├── test_error_handling_and_recovery.py
│   │   ├── test_esp32_integration.py
│   │   ├── test_performance_and_scaling.py
│   │   ├── test_report_generation.py
│   │   └── test_safety_and_moderation.py
│   ├── comprehensive_testing_framework.py
│   ├── conftest.py
│   ├── contract_components
│   │   ├── __init__.py
│   │   ├── ai_service_tester.py
│   │   ├── audio_service_tester.py
│   │   ├── child_service_tester.py
│   │   ├── models.py
│   │   ├── parent_service_tester.py
│   │   ├── report_generator.py
│   │   ├── security_service_tester.py
│   │   ├── test_executor.py
│   │   └── validator.py
│   ├── contract_tests.py
│   ├── e2e
│   │   ├── playwright.config.js
│   │   ├── test_full_journey.py
│   │   ├── test_full_system.py
│   │   └── test_mobile_experience.py
│   ├── enhanced_testing
│   │   └── __init__.py
│   ├── final_test.py
│   ├── framework
│   │   ├── __init__.py
│   │   ├── base.py
│   │   ├── bdd.py
│   │   ├── builders.py
│   │   └── validators.py
│   ├── framework_components
│   │   ├── __init__.py
│   │   ├── child_safety_test_runner.py
│   │   ├── contract_test_runner.py
│   │   ├── e2e_test_runner.py
│   │   ├── integration_test_runner.py
│   │   ├── models.py
│   │   ├── mutation_test_runner.py
│   │   ├── performance_test_runner.py
│   │   ├── quality_automation_runner.py
│   │   ├── report_generator.py
│   │   ├── security_test_runner.py
│   │   └── unit_test_runner.py
│   ├── frontend_components
│   │   ├── __init__.py
│   │   ├── conftest.py
│   │   ├── test_accessibility.py
│   │   ├── test_authentication.py
│   │   ├── test_child_profile.py
│   │   ├── test_conversations.py
│   │   ├── test_dashboard.py
│   │   ├── test_emergency_alerts.py
│   │   ├── test_error_handling.py
│   │   ├── test_i18n.py
│   │   ├── test_integration.py
│   │   ├── test_performance.py
│   │   ├── test_reports.py
│   │   ├── test_security.py
│   │   └── test_websocket.py
│   ├── graphql
│   │   ├── test_authentication.py
│   │   ├── test_cache_integration.py
│   │   ├── test_error_handling.py
│   │   ├── test_federation_config.py
│   │   ├── test_federation_gateway.py
│   │   ├── test_federation_integration.py
│   │   ├── test_performance_monitoring.py
│   │   ├── test_rate_limiting.py
│   │   ├── test_service_config.py
│   │   └── test_service_resolvers.py
│   ├── integration
│   │   ├── ai
│   │   │   └── test_ai_service_integration.py
│   │   ├── api
│   │   │   ├── test_esp32_endpoints.py
│   │   │   └── test_parental_dashboard.py
│   │   ├── persistence
│   │   │   └── test_database_integration.py
│   │   ├── test_ai_modules_integration.py
│   │   ├── test_ai_service_integration.py
│   │   ├── test_api_integration.py
│   │   ├── test_conversation_flow.py
│   │   ├── test_e2e_interaction_flow.py
│   │   ├── test_health_integration.py
│   │   ├── test_pagination_monitoring.py
│   │   ├── test_production_readiness.py
│   │   └── test_voice_api_integration.py
│   ├── load
│   │   ├── locustfile.py
│   │   ├── test_concurrent_users.py
│   │   └── test_load_performance.py
│   ├── mutation_tests.py
│   ├── performance
│   │   ├── test_performance.py
│   │   └── test_system_performance.py
│   ├── run_tests.py
│   ├── security
│   │   ├── test_basic_security.py
│   │   ├── test_child_protection_comprehensive.py
│   │   ├── test_child_safety.py
│   │   ├── test_child_safety_comprehensive.py
│   │   ├── test_comprehensive_security.py
│   │   ├── test_comprehensive_security_service.py
│   │   ├── test_input_validation.py
│   │   ├── test_performance_critical.py
│   │   └── test_phase1_security_foundation.py
│   ├── security_validation_test.py
│   ├── simple_sanity_check.py
│   ├── test_ai_safety_system.py
│   ├── test_backward_compatibility.py
│   ├── test_basic_functionality.py
│   ├── test_basic_working.py
│   ├── test_bias_detection.py
│   ├── test_child_aggregate.py
│   ├── test_child_repository.py
│   ├── test_clean_container.py
│   ├── test_container.py
│   ├── test_content_moderator.py
│   ├── test_coppa_configuration.py
│   ├── test_distributed_processor.py
│   ├── test_edge_ai_manager.py
│   ├── test_emotion_analyzer.py
│   ├── test_event_sourced_child_profile.py
│   ├── test_exception_handling.py
│   ├── test_homomorphic_encryption.py
│   ├── test_integration.py
│   ├── test_multi_layer_cache.py
│   ├── test_security_solutions.py
│   ├── test_session_manager.py
│   ├── test_simple.py
│   ├── test_validator.py
│   ├── test_verification.py
│   ├── unit
│   │   ├── ai
│   │   │   └── test_ai_service.py
│   │   ├── application
│   │   │   ├── event_handlers
│   │   │   ├── interfaces
│   │   │   └── services
│   │   ├── conversation_repository_tests
│   │   │   ├── conftest.py
│   │   │   ├── test_aggregation.py
│   │   │   ├── test_analytics.py
│   │   │   ├── test_basic_operations.py
│   │   │   ├── test_error_handling.py
│   │   │   ├── test_integration.py
│   │   │   ├── test_maintenance.py
│   │   │   ├── test_messaging.py
│   │   │   └── test_search.py
│   │   ├── domain
│   │   │   ├── entities
│   │   │   ├── events
│   │   │   ├── services
│   │   │   ├── test_emotion_analyzer.py
│   │   │   └── value_objects
│   │   ├── infrastructure
│   │   │   ├── persistence
│   │   │   └── security
│   │   ├── security
│   │   │   └── test_auth_service.py
│   │   ├── test_ai_orchestration_service.py
│   │   ├── test_ai_service.py
│   │   ├── test_auth_service.py
│   │   ├── test_child_safety.py
│   │   ├── test_consent_verification.py
│   │   ├── test_coppa_compliance.py
│   │   ├── test_core_features.py
│   │   ├── test_database_service.py
│   │   ├── test_security_hardening.py
│   │   ├── test_unified_security_service.py
│   │   ├── use_cases
│   │   │   ├── test_generate_ai_response.py
│   │   │   ├── test_generate_dynamic_story.py
│   │   │   ├── test_manage_child_profile.py
│   │   │   └── test_process_esp32_audio.py
│   │   ├── utils
│   │   │   └── test_file_validators.py
│   │   └── voice_service_tests
│   │       ├── conftest.py
│   │       ├── test_audio_format_handling.py
│   │       ├── test_configuration.py
│   │       ├── test_error_handling.py
│   │       ├── test_esp32_processing.py
│   │       ├── test_health_check.py
│   │       ├── test_initialization.py
│   │       ├── test_integration.py
│   │       ├── test_mock_transcription.py
│   │       ├── test_performance.py
│   │       └── test_transcription.py
│   └── utils
│       └── mock_data.py
├── tree.py
├── أمان_المشروع_(Bandit).md
├── الأولويات_العالية_⚠️.md
├── الأولويات_المتوسطة_📋.md
├── التحقق_من_أنواع_البيانات_(MyPy).md
├── التحقق_من_تنسيق_الكود_(Black).md
├── الدوال_المكررة.md
├── الـ_dead_code_(Vulture).md
├── الكلاسات_المكررة.md
├── الملفات_الفارغة.md
├── تحقق_أمان_الحزم_(pip-audit).md
├── ترتيب_الاستيرادات_(isort).md
├── تعقيد_الشفرة_(Radon).md
├── تغطية_الاختبارات.md
├── تنظيف_سريع_للكود_(Ruff).md
├── حب_حب_وينك.txt
├── فحص_الحزم_المثبتة_(Safety).md
├── فحص_جودة_التوثيق_(pydocstyle).md
├── فحص_معالجة_استدعاءات_API.md
├── فحص_مفاتيح_API_المكشوفة.md
├── فحص_مكتبات_الذكاء_الاصطناعي_المستخدمة.md
├── كشف_الأسرار_والمعلومات_الحساسة.md
└── كود_شبه_نهائي___TODO.md

162 directories, 468 files
